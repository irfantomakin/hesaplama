<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Süre Hesaplama</title>

<style>
:root{
  --danger:#c62828;
  --dark:#111;
  --bg:#f6f7f9;
}

html,body{
  margin:0;
  height:100%;
  font-family:system-ui,-apple-system;
  background:var(--bg);
}

h1{
  text-align:center;
  font-size:18px;
  margin:10px 0;
}

.toolbar{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-bottom:8px;
}
.btn{
  padding:10px 14px;
  border-radius:14px;
  border:1px solid #ccc;
  background:#fff;
  font-weight:700;
}
.btn.active{ border-color:#000; }

.area{
  display:none;
  background:#fff;
  margin:0 10px;
  border-radius:18px;
  padding:12px;
  height:calc(100dvh - 160px);
  overflow:auto;
}
.area.active{ display:block; }

.header{
  position:sticky;
  top:0;
  background:#fff;
  z-index:5;
}

.titlebar{
  display:flex;
  align-items:center;
  justify-content:space-between;
}

.topbar{
  display:flex;
  align-items:center;
  gap:12px;
  margin-top:8px;
}

.diff{
  font-size:34px;
  font-weight:900;
  color:var(--danger);
  min-width:120px;
}

input{
  width:110px;
  padding:10px;
  font-size:18px;
  text-align:center;
  border-radius:14px;
  border:1px solid #ccc;
}

input.filled{
  background:#111;
  color:#fff;
  border-color:#111;
}

.list{
  margin-top:10px;
  padding-bottom:120px;
}

.row{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:8px;
}

.idx{ width:28px; text-align:right; }

.footer{
  position:sticky;
  bottom:0;
  background:#fff;
  padding-top:8px;
  border-top:1px solid #eee;
  font-weight:800;
  display:flex;
  justify-content:space-between;
}

.bottom-bar{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#000;
  color:#fff;
  font-weight:900;
  display:flex;
  justify-content:space-between;
  padding:14px 18px env(safe-area-inset-bottom);
  font-size:18px;
}
</style>
</head>

<body>

<h1>Süre Hesaplama</h1>

<div class="toolbar">
  <button class="btn active" id="btn1">Alan 1</button>
  <button class="btn" id="btn2">Alan 2</button>
</div>

<!-- ALAN 1 -->
<div class="area active" id="area1Box">
  <div class="header">
    <div class="titlebar">
      <strong>Alan 1</strong>
      <button onclick="clearArea(1)">Hepsini Sil</button>
    </div>
    <div class="topbar">
      <div class="diff" id="diff1">00:00</div>
      <input id="sub1" placeholder="dk/sn">
    </div>
  </div>

  <div class="list" id="list1"></div>

  <div class="footer">
    <span>Toplam</span><span id="total1">00:00</span>
  </div>
</div>

<!-- ALAN 2 -->
<div class="area" id="area2Box">
  <div class="header">
    <div class="titlebar">
      <strong>Alan 2</strong>
      <button onclick="clearArea(2)">Hepsini Sil</button>
    </div>
    <div class="topbar">
      <div class="diff" id="diff2">00:00</div>
      <input id="sub2" placeholder="dk/sn">
    </div>
  </div>

  <div class="list" id="list2"></div>

  <div class="footer">
    <span>Toplam</span><span id="total2">00:00</span>
  </div>
</div>

<div class="bottom-bar">
  <div>FARK: <span id="bottomDiff">00:00</span></div>
  <div>TOPLAM: <span id="bottomTotal">00:00</span></div>
</div>

<script>
function sec(v){
  if(!v) return 0;
  const d=v.replace(/\D/g,"");
  if(d.length<=2) return +d;
  return +d.slice(0,-2)*60 + +d.slice(-2);
}
function fmt(s){
  const m=Math.floor(Math.abs(s)/60);
  const sn=Math.abs(s)%60;
  return `${s<0?"-":""}${String(m).padStart(2,"0")}:${String(sn).padStart(2,"0")}`;
}

function makeRows(listId,count){
  const box=document.getElementById(listId);
  for(let i=1;i<=count;i++){
    const r=document.createElement("div");
    r.className="row";
    r.innerHTML=`<div class="idx">${i}.</div><input placeholder="dk/sn">`;
    const inp=r.querySelector("input");
    inp.oninput=()=>{ inp.classList.toggle("filled",!!inp.value); calc(); };
    box.appendChild(r);
  }
}

makeRows("list1",13);
makeRows("list2",7);

function sum(listId){
  return [...document.querySelectorAll(`#${listId} input`)]
    .reduce((t,i)=>t+sec(i.value),0);
}

function calc(){
  const a1=sum("list1");
  const a2=sum("list2");

  total1.textContent=fmt(a1);
  total2.textContent=fmt(a2);

  diff1.textContent=fmt(a1-sec(sub1.value));
  diff2.textContent=fmt(a2-sec(sub2.value));

  if(area1Box.classList.contains("active")){
    bottomDiff.textContent=fmt(a1-sec(sub1.value));
    bottomTotal.textContent=fmt(a1);
  }else{
    bottomDiff.textContent=fmt(a2-sec(sub2.value));
    bottomTotal.textContent=fmt(a2);
  }
}

function clearArea(n){
  document.querySelectorAll(`#list${n} input`).forEach(i=>{i.value="";i.classList.remove("filled");});
  calc();
}

btn1.onclick=()=>{
  btn1.classList.add("active"); btn2.classList.remove("active");
  area1Box.classList.add("active"); area2Box.classList.remove("active");
  calc();
};
btn2.onclick=()=>{
  btn2.classList.add("active"); btn1.classList.remove("active");
  area2Box.classList.add("active"); area1Box.classList.remove("active");
  calc();
};

[sub1,sub2].forEach(i=>i.oninput=calc);
calc();
</script>

</body>
</html>
