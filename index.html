<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Süre Hesaplama</title>

<style>
:root{
  --bg:#f6f7f9;
  --card:#fff;
  --border:#e6e6e6;
  --danger:#c62828;
  --dark:#2b2b2b;
  --safeBottom: env(safe-area-inset-bottom, 0px);
}

html,body{
  margin:0;
  height:100%;
  background:var(--bg);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

h1{
  text-align:center;
  font-size:18px;
  margin:10px 0;
}

.toolbar{
  display:flex;
  gap:10px;
  justify-content:center;
  margin-bottom:8px;
}
.btn{
  padding:10px 14px;
  border-radius:14px;
  border:1px solid #ccc;
  background:#fff;
  font-weight:700;
}
.btn.active{
  border-color:#000;
}

.areas{
  display:block;
}

.area{
  background:#fff;
  margin:0 10px;
  border-radius:20px;
  display:none;
  flex-direction:column;
  height:calc(100dvh - 140px);
  overflow:auto;
  padding-bottom:140px; /* ✅ TOPLAM için boşluk */
}
.area.active{ display:flex; }

.area-head{
  position:sticky;
  top:0;
  background:#fff;
  z-index:5;
  padding:12px;
}

.titlebar{
  display:flex;
  align-items:center;
  gap:10px;
}
.titlebar h2{
  margin:0;
  font-size:20px;
}
.titlebar .spacer{ flex:1; }

.clear-all{
  border:1px solid #f1b7b7;
  color:var(--danger);
  background:#fff;
  padding:8px 12px;
  border-radius:14px;
  font-weight:800;
}

.topbar{
  display:flex;
  align-items:center;
  gap:12px;
  margin-top:8px;
}

.top-diff{
  font-size:36px;
  font-weight:900;
  color:var(--danger);
  min-width:120px;
}

.right-controls{
  display:flex;
  align-items:center;
  gap:8px;
}

input{
  width:120px;
  padding:10px;
  font-size:18px;
  text-align:center;
  border-radius:16px;
  border:1px solid #ddd;
}
input.filled{
  background:#2b2b2b;
  color:#fff;
  border-color:#2b2b2b;
}

.icon-btn{
  width:42px;
  height:42px;
  border-radius:14px;
  border:1px solid #ddd;
  background:#fff;
  font-size:18px;
}

.list{
  flex:1;
  padding:10px 12px;
}

.row{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:10px;
}
.idx{
  width:28px;
  text-align:right;
  color:#777;
}

.area-foot{
  position:sticky;
  bottom:0;
  background:#fff;
  padding:10px 12px;
  border-top:1px solid #eee;
  z-index:4;
}

.total{
  display:flex;
  justify-content:space-between;
  font-size:20px;
  font-weight:900;
}

.grand{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  padding:14px;
  background:#000;
  color:#fff;
  font-size:22px;
  font-weight:900;
  text-align:center;
}
</style>
</head>

<body>

<h1>Süre Hesaplama</h1>

<div class="toolbar">
  <button class="btn active" id="tab1">Reklamdan Önce</button>
  <button class="btn" id="tab2">Reklamdan Sonra</button>
</div>

<div class="areas">

<!-- ALAN 1 -->
<div class="area active" id="areaBox1">
  <div class="area-head">
    <div class="titlebar">
      <h2>Reklamdan Önce</h2>
      <div class="spacer"></div>
      <button class="clear-all" onclick="clearArea('area1')">Hepsini Sil</button>
    </div>

    <div class="topbar">
      <div class="top-diff" id="remain1">00:00</div>
      <div class="right-controls">
        <span>Girilen</span>
        <input id="sub1" placeholder="dk/sn" inputmode="numeric">
        <button class="icon-btn" onclick="clearInput(sub1)">×</button>
      </div>
    </div>
  </div>

  <div class="list" id="area1"></div>

  <div class="area-foot">
    <div class="total"><span>Toplam</span><span id="total1">00:00</span></div>
  </div>
</div>

<!-- ALAN 2 -->
<div class="area" id="areaBox2">
  <div class="area-head">
    <div class="titlebar">
      <h2>Reklamdan Sonra</h2>
      <div class="spacer"></div>
      <button class="clear-all" onclick="clearArea('area2')">Hepsini Sil</button>
    </div>

    <div class="topbar">
      <div class="top-diff" id="remain2">00:00</div>
      <div class="right-controls">
        <span>Girilen</span>
        <input id="sub2" placeholder="dk/sn" inputmode="numeric">
        <button class="icon-btn" onclick="clearInput(sub2)">×</button>
      </div>
    </div>
  </div>

  <div class="list" id="area2"></div>

  <div class="area-foot">
    <div class="total"><span>Toplam</span><span id="total2">00:00</span></div>
  </div>
</div>

</div>

<div class="grand">
  GENEL TOPLAM: <span id="grandTotal">00:00</span>
</div>

<script>
function makeRows(id,count){
  const box=document.getElementById(id);
  for(let i=1;i<=count;i++){
    const r=document.createElement("div");
    r.className="row";
    r.innerHTML=`
      <div class="idx">${i}.</div>
      <input placeholder="dk/sn" inputmode="numeric">
      <button class="icon-btn">×</button>`;
    const inp=r.querySelector("input");
    const btn=r.querySelector("button");
    inp.oninput=()=>calc();
    btn.onclick=()=>{inp.value="";calc();}
    box.appendChild(r);
  }
}

makeRows("area1",13);
makeRows("area2",7);

tab1.onclick=()=>{
  tab1.classList.add("active");
  tab2.classList.remove("active");
  areaBox1.classList.add("active");
  areaBox2.classList.remove("active");
};
tab2.onclick=()=>{
  tab2.classList.add("active");
  tab1.classList.remove("active");
  areaBox2.classList.add("active");
  areaBox1.classList.remove("active");
};

function clearArea(id){
  document.querySelectorAll(`#${id} input`).forEach(i=>i.value="");
  calc();
}
function clearInput(i){ i.value=""; calc(); }

function toSec(v){
  if(!v) return 0;
  const p=v.replace(/\D/g,"");
  if(p.length<=2) return Number(p);
  return Number(p.slice(0,-2))*60+Number(p.slice(-2));
}
function fmt(s){
  const m=Math.floor(s/60);
  const sn=s%60;
  return `${String(m).padStart(2,"0")}:${String(sn).padStart(2,"0")}`;
}
function calc(){
  const a1=[...area1.querySelectorAll("input")].reduce((t,i)=>t+toSec(i.value),0);
  const a2=[...area2.querySelectorAll("input")].reduce((t,i)=>t+toSec(i.value),0);
  total1.textContent=fmt(a1);
  total2.textContent=fmt(a2);
  grandTotal.textContent=fmt(a1+a2);
  remain1.textContent=fmt(Math.abs(a1-toSec(sub1.value)));
  remain2.textContent=fmt(Math.abs(a2-toSec(sub2.value)));
}
</script>

</body>
</html>
